\documentclass[11pt]{article}
\usepackage{amsmath}

\begin{document}


%\chapter{Asset Liability Management (ALM)}
%\section{}
%
%This chapter introduces the usage of R for commercial bank \textbf{asset and liability management (ALM)} purposes. The ALM function in a bank is traditionally associated with interest rate risk and liquidity risk management of banking book positions. Both of the interest rate positioning and liquidity risk management require the modeling of banking products. Nowadays, professional ALM units use complex \textbf{Enterprise Risk Management (ERM)} frameworks, which are able to incorporate the management of all risk types and provide an adequate tool for ALM to steer the balance sheet. Our general objective is to set up a simplified framework of ALM to illustrate the use of R for certain ALM tasks. These tasks are based on the interest rate and liquidity risk management and the modeling of non-maturing accounts.
%
%
%This chapter is structured as follows. We start with the data-preparation process of
%ALM analysis. The process of planning and measurement needs special information
%about the banking book, market conditions, and the business strategy. This part
%establishes a data-management tool that consists of the major input datasets, and
%extracts data into the form that we use in the rest of this chapter.
%
%
%Next, we will be dealing with the measurement of the interest rate risk. There are
%two common approaches in the banking industry to quantify interest rate risk in
%the banking book. Simpler techniques use repricing gap table analysis to manage
%the interest rate risk exposure and calculate parallel yield curve shocks to forecast
%the net \textbf{interest income (NII) }and calculate the \textbf{market value of equity (MVoE)}.
%More advanced methods use dynamic simulation of balance sheets and stochastic
%simulation of interest rate development. Choosing which tool to use depends on the
%targets and the balance sheet structure. 
%
%
%For example, a savings bank (with client term deposits on the liability side and fix
%bond investments on the asset side) focuses on its market value of equity risk, while
%a corporate bank (with floating interest position) concentrates on the net interest
%income risk. We illustrate how to efficiently provide a repricing gap table and net
%interest income forecasts with Python.
%
%In the last section of this chapter, we will concentrate on the modeling of non-maturing
%products. Client products can be classified by their maturity structure and interest
%rate behavior. Examples of typical non-maturing liability products are on-demand
%deposits and savings accounts without any notice period of withdrawal. The clients
%can withdraw their money at any time, while the bank has the right to modify the
%offered interest rate. On the asset side, overdrafts and credit cards show quite similar
%characteristics. The complex models of non-maturing products make the work of ALM
%quite challenging. Practically, the modeling of non-maturing products means
%the mapping of the cash-flow profiles, estimating the interest rate elasticity of the
%demand, and analyzing the liquidity-related costs in the internal funds transfer
%pricing (FTP) system. Here, we demonstrate how to measure the interest sensitivity
%of the non-maturing deposits.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%TODO Introduction'
%TODO Data description'
%TODO Loans'
%TODO Yield curve'
%TODO Cashflows'
%TODO Interest rate risk measurement'




\section{Introduction}


\subsection{Background}

Asset and Liability Management (ALM) is a mechanism to address the risks faced by a
bank that arise as a result of a mismatch between assets and liabilities due to liquidity and changes in interest rates. One of the central issues of ALM is to manage interest rate risk associated with long-term and non tradable assets and liabilities. ALM focuses on bank’s earnings and value which aim to measure the interest rate risk in the banking book.


The phrase ’interest rate risk in the banking book’ (IRRBB) implies that the bank’s position and its financial situation are sensitive to fluctuations in market interest rates.\\


Currently, regulators are considering standardizing the management of IRRBB to a certain extent. An example of a step taken in this direction are the reporting standards
to IRRBB proposed by Basel Committee on Banking Supervision (BCBS) which were
issued in April 2016 with the title: ”Standards on Interest Rate Risk in the Banking
Book”. The new reporting standards propose two perspectives on evaluating IRRBB:
earnings and economic value. The earnings perspective focuses on the impact of interest rate movements on the net interest or accrued income of a bank over a time
horizon of several years. This perspective is measured in terms of Net Interest Income
(NII). The economic value perspective focuses on the impact of changes in interest rate
movements on the value of an institution’s asset, liabilities and off-balance sheet items.\\


This perspective is measured in terms of Economic Value of Equity (EVE) (BCBS,
2016). These two perspectives are based on different concepts, yield different results
and employ different interest rate risk strategies.
The earnings perspective captures the short-term effect of interest rate changes, whereas
the economic value perspective captures the long-term effect of interest rate changes.
Therefore, the two perspectives are considered complementary. As such, regulators
require banks to disclose both metrics, in order to enable comparability. These two
perspectives however follow different procedures and lead to different outcomes. Nevertheless, these two perspectives cannot be considered separately either. A pure focus on one could lead to destabilization of the alternative resulting in a trade-off.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Data Description}

For the interest rate risk modelling part, we use two datasets from $2014-09-30$, namely the bank's portfolio and the market for zero-coupon bonds with different maturities.\\

More specifically, the portfolio contains the following data. 
\begin{itemize}
	\item \textbf{id:} identification number (index of the row)
	\item \textbf{account:} account type in short (e.g. mmp\_1)
	\item \textbf{account\_name:} long account name (e.g. Money market placements)
	\item \textbf{volume:} notional value in EUR
	\item \textbf{ir\_binding:} type of the interest rate. FIX for fixed rates, and LIBOR for variable rates with the variable benchmark LIBOR
	\item \textbf{reprice\_freq:} repricing frequency (of the rates) in months if the interest binding is LIBOR
	\item \textbf{spread:} the spread component of the interest rate in basis points (1 basis point $0.01\%$). The other component is the market's interest rates. $$(\text{Interest rate}) = (\text{Market's interest rate})+(\text{spread})$$
	\item 
\end{itemize}

    
%    - Cash-flow structure of the products
%    :col issue: issue date (this is the first repricing day)
%    :col maturity: maturity date
%    :col repayment: type of principal repayment structure (bullet, linear, or annuity)
%    :col payment_freq: repayment frequency in number of months
%    :col yieldcurve: identifier of the interest rate curve

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Loans}


\subsection{Amortizing Loan}

When a bank gives out a loan, the loan is expected to be payed back with interest. An \textbf{amortizing loan} is a type of loan in which the borrower makes regular, periodic payments that include both \textbf{principal} and \textbf{interest}. These payments are structured in a way that ensures the full repayment of the original loan amount (the principal) along with all accrued interest by the end of the loan term, or \textbf{maturity}. The process of spreading out the repayment of a loan over time is called \textbf{amortization}. The term "amortize" means to gradually reduce or pay off a debt over time.\\

The \textbf{amortization schedule} is a table or spreadsheet that outlines the details of each payment, including the amount allocated to principal and interest for each period. It also shows the remaining balance after each payment. This schedule provides borrowers with a clear understanding of how their loan will be paid off and helps them budget for future payments. On the other side, for the banks the amortization schedule is useful for the calculations of future cashflows for risk management.

\subsection{Loan Payment Structure}

In this section we describe three basic and frequent loan payment structures, namely, the linear, the annuity and finally the bullet. The names describe the distribution of principal payments (repayment of the original loan volume). For example, for the linear loan payment, every month we pay fixed amount on the principal value. 


\subsubsection{Bullet Loan Payment Structure}

A bullet loan, also known as a bullet payment loan or balloon payment loan, is a type of loan structure in which the borrower makes regular interest payments throughout the loan term but repays the entire principal (the original loan amount) in a single lump-sum payment at the end of the loan term.\\

Suppose $P$ represents the principal amount, and the loan is to be repayed in $N$ regular (e.g. monthly) instalments. If at each period $i$, the interest rate (for the length of this period) is $r_i$, then the payment for that period $p_i$ is 
\begin{align}
	p_i(P,r_i,N) =r_i\cdot P+\delta_{i,N}\cdot P
\end{align}
with $r_i\cdot P$ being the interest payment, and $\delta_{i,N}\cdot P$ is the final lump-sum principal payment.

\subsubsection{Linear Payment Structure}

A linear loan, also known as a straight-line loan or linear amortizing loan, is a type of loan structure in which the borrower pays back an equal portion of the principal at each payment period, along with the interest on the outstanding balance. The principal repayment remains constant throughout the loan term. However, since the outstanding balance reduces with each payment, the interest portion decreases over time, making the total payment amount decline over the life of the loan.\\

Suppose $P$ represents the principal amount, and the loan is to be repayed in $N$ regular (e.g. monthly) instalments. If at each period $i$, the interest rate (for the length of this period) is $r_i$, then the payment for that period $p_i$ is 
\begin{align}
	p_i\big(P,N,r_i,\{p_j\}_{j=1}^{i-1}\big)= \frac{P}{N}+r_i\cdot\underbrace{\bigg[P-\sum_{j=1}^{i-1}p_j\bigg]}_{\text{outstanding bal.}}
\end{align}
The first term is the principal payment, while the second is the interest payment.



\subsubsection{Annuity Payment Structure}

An annuity payment structure refers to a series of periodic payments made at equal intervals. The key feature of this payment structure is that the sum of the present values of all payments must be equal to the principal value. When the interest rates are fixed, the borrower makes equal total payments each period consisting of both principal and interest. At the beginning of the loan term, a large portion of each payment is applied to interest, with a smaller portion going to reduce the principal. As the loan matures, the interest portion of each payment decreases, and the principal portion increases, but the total payment remains the same.\\

Suppose $P$ represents the principal amount, and the loan is to be repayed in $N$ regular (e.g. monthly) instalments. If at each period $i$, the interest rate (for the length of this period) is $r_i$, then the payment for that period $p_i$ is derived in the following fashion.\\

An annuity is a series of constant (fixed) payments (or cash flows) of $p_i=p$ made at the end of each period over $n$ periods. To derive the formula for $p_i$, we consider the present value of each payment. If we make the payment on the $i$th payment period, its present value is 
$$\text{PV}(p_i)=p\bigg/\prod_{j=1}^i(1+r_j)$$
The present value of all the payments is required to be equal to the principal value of the loan. That is,
\begin{align}
	P=\sum_{i=1}^N\text{PV}(p_i)=p\sum_{i=1}^N\bigg[\prod_{j=1}^i(1+r_j)\bigg]^{-1}\nonumber
\end{align}
which gives us 
\begin{align}
	p_i=P\bigg/\sum_{i=1}^N\bigg[\prod_{j=1}^i(1+r_j)\bigg]^{-1}\label{annuity_der}
\end{align}
When the interest rates are fixed, the formulas become much simpler. To be more explicit

$$P=p\cdot \sum_{i=1}^N\frac{1}{(1+r)^i}=p\cdot\frac{1-(r+1)^{-N}}{r}$$
and therefore, we find that the constant periodic payment is
\begin{align}
	p(P, N, r)=\frac{r\cdot P}{1-(1+r)^{-N}}\label{annuity_payment}
\end{align}
\\

In all practical cases, when the interest rates are variable, the payment is not calculated with \eqref{annuity_der}, because, even thought the future interest rates may be predicted under certain models and assumptions, they are not known. In this case, the periodic payment is not constant and is recalculated at each period based on the current interest rate, the outstanding balance, and the time to maturity at that time with \eqref{annuity_payment}. Thus, the payment (or cashflow) during the $i$th payment period is
\begin{align}
	p_i=\frac{r_i}{1-(1+r_i)^{-N_i}}\cdot \underbrace{\bigg [P-\sum_{j=1}^ip_j\bigg]}_{\text{outstanding bal.}}
\end{align}
with $N_i$ being the number of payment periods remaining to maturity. We see that the payment is calculated as if the loan payment started at that period, with principal



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Yield Curve}

A \textbf{yield curve} is a graphical representation of annual returns on assets with similar risk profile for a range of maturities. The horizontal axis represents the time to maturities, while the vertical axis represents the yield.

\subsection{What are spot yields}

 In our case, we are interested in \textbf{spot yields} or \textbf{spot rates}, which are the yields of zero-coupon bonds for specific maturities. A \textbf{zero-coupon bond} is a bond that does not make periodic interest payments and is instead issued at a discount too its face value. It matures at its face value, and the difference between the purchase price and that face value is the interest earned by the bondholder.\\
 
 Since spot yields pertain to zero-coupon bonds, they provide a pure measure of interest rates over different horizons without the complexities introduced by periodic coupon payments. This makes them a clear and direct indicator of the cost of borrowing money for specific time periods. \\
 
  Spot yields are useful to banks for a number of reasons; for example loan pricing and deriving forward rates. As far as the loan pricing is concerned, banks might refer to the yield curve and issue loans with rate calculated by adding a spread to the spot yield for the corresponding maturity, for credit-risk and profit. As for the forward yields, we describe them in a following subsection.


\subsection{Modelling Spot Yield Curve}

One can find the relation between the spot yields and the time to maturity with various models. A particularly flexible model is the  Nelson--Siegei--Svensson model. \\

The Nelson and Siegel group of models are based on the original model by Nelson and Siegel, which originally had four parameters. The Svensson extension introduced two new “slope” parameters to allow for a better variety of shapes for both instantaneous forward rate curves and yield curves.  Virtualy any yield curve shape can be interpolated using these two models, which are widely used at banks around the world.\\

Two of the main reasons we want to model the relation between the time to maturity and the spot yield are interpolation, and extrapolation.
Sometimes there are missing values in a time-series data set. For instance, interest rates for years 1 to 3 may exist, followed by years 5 to 8, and then year 10. Our model can be used to also be used to forecast or extrapolate values of future time periods beyond the time period of available data.\\

The known $x$ values represent the values on the $x$-axis, which are the values that are known in advance such as time (or years). and the known $y$ values represent the values on the $y$-axis (in our case, the known Interest Rates). The $y$-axis variable is typically the variable you wish to interpolate missing values from or extrapolate the values into the future.\\

 Equation \eqref{nss_instantaneous_forward_rate} shows how the instantaneous forward rate can be expressed as a function of the six parameters. The Nelson-Siegel-Svensson model provides a well behaved, smooth forward rate curve. The original Nelson-Siegel model is the same as the Svensson with $\beta_4=0$. Equation \eqref{nss_closed_form} shows how the model can be expressed as a closed form expression of yields.
\begin{align}
	f(t)=\beta_1+\beta_2\exp\bigg(\frac{-t}{\lambda_1}\bigg)
			+\beta_3\frac{t}{\lambda_1}\exp\bigg(\frac{-t}{\lambda_1}\bigg)
			+\beta_4\frac{t}{\lambda_2}\exp\bigg(\frac{-t}{\lambda_2}\bigg)
			\label{nss_instantaneous_forward_rate}
\end{align}
\begin{align}
	r(t)=\beta_1&+\beta_2\bigg(\frac{t}{\lambda_1}\bigg)^{-1}\bigg[1-\exp\bigg(\frac{-t}{\lambda_1}\bigg)\bigg]\nonumber\\
		&+\beta_3\bigg\{\bigg(\frac{t}{\lambda_1}\bigg)^{-1}\bigg[1-\exp\bigg(\frac{-t}{\lambda_1}\bigg)\bigg]-\exp\bigg(\frac{-t}{\lambda_1}\bigg)\bigg\}\nonumber\\
		&+\beta_4\bigg\{\bigg(\frac{t}{\lambda_2}\bigg)^{-1}\bigg[1-\exp\bigg(\frac{-t}{\lambda_2}\bigg)\bigg]-\exp\bigg(\frac{-t}{\lambda_2}\bigg)\bigg\}
		\label{nss_closed_form}
\end{align}
A benefit of the Nelson-Siegel-Svensson model is the interpretations of $\beta_1$ and $\beta_1+\beta_2$. $\beta_1$ can be interpreted as the long term interest rate, while $\beta_1+\beta_2$ is the instantaneous short term interest rate.

 \subsection{Forward Yields}

Forward yields (or forward rates) represent the expected future interest rates for specific periods, derived from current spot rates. They offer insight into the market's expectations regarding future interest rate movements, economic conditions, and expected future cashflows. Forward rates can be calculated under the assumption of non-arbitrage with the following syllogism. 

Suppose we aim to determine the forward yield \(f_{t,s}\) for a zero-coupon bond that begins accruing in \(t\) periods (e.g., years) and spans \(s\) periods. To find \(f_{t,s}\), we set up a scenario. Imagine we first invest in a bond maturing in \(t\) periods with a current spot yield of \(Y_t\). Once this bond matures, we then reinvest the proceeds into a new zero-coupon bond that starts accruing at \(t\) and matures at \(t+s\). The return from this strategy should be equivalent to directly investing in a zero-coupon bond that begins accruing now and matures at \(t+s\) with a spot yield of \(Y_{t+s}\). Therefore, the relationship can be expressed as:
\begin{equation}
(1 + Y_{t+s})^{t+s} = (1 + Y_t)^t(1 + f_{t,s})^s
\end{equation}
From which, the forward yield \(f_{t,s}\) can be isolated as:
\begin{equation}
f_{t,s} = \left[ \frac{(1 + Y_{t+s})^{t+s}}{(1 + Y_t)^t} \right]^{1/s} - 1
\end{equation}

\subsection{Calculating forward interest rates for the bank's portfolio}

As we mentioned in the section that describes the data, the portfolio consists of assets and liabilities that the bank owns. Some of them have fixed rates, while others have variable. The possible variations of interest rates do not affect the cashflows generated by the former. However, since the rates of the latter are variable, in order to calculate their future cashflows we have to calculate the values of the rates for the dates of the payments. To do so, we use the curve \eqref{nss_closed_form} to calculate the spot rates for the payment dates, and then 

\section{Cashflows}

In the following, 


\section{Interest Rate Risk Measurement}

Interest rate risk is the potential for changes in interest rates to negatively impact the financial position of an institution, particularly those institutions that are involved in lending, borrowing, or holding fixed-income securities. Interest rate management focuses on the sensitivity of net interest income. \textbf{Net interest income (NII)} equals the difference between interest revenues and interest expenses:
\begin{align}
	\text{NII}=(A_S+A_{NS})\cdot r_A-(L_S+L_{NS})\cdot r_L
\end{align}
Here $A_S$ and $A_{NS}$ are the interest sensitive and non-sensitive assets, and $r_A$ is the interest rate of the assets. Similarly, $L_S$ and $L_{NS}$ are the interest sensitive and non-sensitive liabilities, with $r_L$ being the interest rate of liabilities.\\

 The traditional approach of interest rate risk positioning of the balance sheet is based on gap models. Interest rate gap refers to the net asset position for a certain time period between interest-bearing assets and liabilities, which are repriced at the same time. The interest rate gap ($G$) equals:
\begin{align}
	G=A_S-L_S
\end{align}











\end{document}
